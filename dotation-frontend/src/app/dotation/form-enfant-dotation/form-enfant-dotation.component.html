<form [formGroup]="form" class="grid grid-cols-1 md:grid-cols-3 gap-4">

  <!-- Type Clients -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Type Clients <span class="text-red-500">*</span></label>
    <select class="w-full border px-3 py-2" formControlName="typeClient">
      <option value="">Sélectionner un type Client</option>
      <option value="resident_marocain">Résident marocain</option>
      <option value="resident_etranger">Résident étranger</option>
      <option value="mre">MRE</option>
      <option value="non_resident">Non-résident</option>
    </select>
    <p *ngIf="form.get('typeClient')?.touched && form.get('typeClient')?.invalid" class="text-red-600 text-sm mt-1">Ce champ est requis.</p>
  </div>

  <!-- CIN -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">CIN <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="cin" />
    <p *ngIf="form.get('cin')?.touched && form.get('cin')?.invalid" class="text-red-600 text-sm mt-1">Ce champ est requis.</p>
  </div>

  <!-- Nom -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Nom <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="nom" />
    <p *ngIf="form.get('nom')?.touched && form.get('nom')?.invalid" class="text-red-600 text-sm mt-1">Ce champ est requis.</p>
  </div>

  <!-- Prénom -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Prénom <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="prenom" />
    <p *ngIf="form.get('prenom')?.touched && form.get('prenom')?.invalid" class="text-red-600 text-sm mt-1">Ce champ est requis.</p>
  </div>

  <!-- Date de Naissance -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Date Naissance <span class="text-red-500">*</span></label>
    <input type="date" class="w-full border px-3 py-2" formControlName="dateNaissance" />
    <p *ngIf="form.get('dateNaissance')?.touched && form.get('dateNaissance')?.invalid" class="text-red-600 text-sm mt-1">Ce champ est requis.</p>
  </div>

  <!-- Numéro de Passeport -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Numéro de Passeport <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="numPasseport" />
    <p *ngIf="form.get('numPasseport')?.touched && form.get('numPasseport')?.invalid" class="text-red-600 text-sm mt-1">
      Format invalide. Utilisez uniquement des lettres et chiffres.
    </p>
  </div>

  <!-- Disponible OC -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Disponibilité OC <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="disponibleOc" />
    <p *ngIf="form.get('disponibleOc')?.touched && form.get('disponibleOc')?.invalid" class="text-red-600 text-sm mt-1">
      <span *ngIf="form.get('disponibleOc')?.errors?.['required']">Ce champ est requis.</span>
      <span *ngIf="form.get('disponibleOc')?.errors?.['pattern']">Chiffres uniquement.</span>
    </p>
  </div>

  <!-- Montant Demandé -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Montant Demandé <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="montantDemande" />
    <p *ngIf="form.get('montantDemande')?.touched && form.get('montantDemande')?.invalid" class="text-red-600 text-sm mt-1">
      <span *ngIf="form.get('montantDemande')?.errors?.['required']">Ce champ est requis.</span>
      <span *ngIf="form.get('montantDemande')?.errors?.['pattern']">Chiffres uniquement.</span>
    </p>
  </div>

  <!-- Numéro Ticket OC -->
  <div>
    <label class="block text-sm text-gray-700 mb-1">Numéro de Ticket OC <span class="text-red-500">*</span></label>
    <input class="w-full border px-3 py-2" formControlName="numTicketOc" />
    <p *ngIf="form.get('numTicketOc')?.touched && form.get('numTicketOc')?.invalid" class="text-red-600 text-sm mt-1">
      Doit être alphanumérique.
    </p>
  </div>

  <!-- pass upload -->
<div class="col-span-full">
  <label class="block text-sm font-medium text-gray-700 mb-1">
    Upload Passport <span class="text-red-600">*</span>
  </label>

  <div class="mt-1">
    <label
      for="enfantPassportUpload"
      class="flex items-center justify-center w-10 h-10 bg-teal-600 hover:bg-teal-700 text-white cursor-pointer"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M16 12l-4-4m0 0l-4 4m4-4v12" />
      </svg>
    </label>

    <input
      type="file"
      id="enfantPassportUpload"
      (change)="onFileSelected($event)"
      class="hidden"
    />
     <span *ngIf="selectedFileName" class="text-sm text-gray-700">{{ selectedFileName }}</span>
  </div>
</div>


  <!-- Footer Buttons -->
  <div class="col-span-full flex justify-end gap-3 mt-6">
    <button type="button" class="bg-gray-600 text-white px-4 py-2 hover:bg-gray-700" (click)="resetForm()">✗ Annuler</button>
    <button type="button" class="bg-teal-600 text-white px-4 py-2 hover:bg-teal-700" (click)="onSubmit()">
      ✓ Ajouter dotation Enfant
    </button>
  </div>

</form>
