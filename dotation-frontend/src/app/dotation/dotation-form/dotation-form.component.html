<div *ngIf="client" class="bg-white p-6 mb-6">

  <!-- This si for errors and success messages -->
  <!-- <div *ngIf="successMsg" class="text-green-700 bg-green-100 border border-green-400 p-3 rounded mb-4">
   <span>{{ successMsg }}</span> -->
  <!-- <button
    *ngIf="lastSubmittedDotation"
    (click)="generatePDF()"
    class="ml-4 px-4 py-1 bg-red-600 text-white rounded hover:bg-red-700"
  >
    Imprimer le reçu
  </button> -->
  <!-- </div>
  <div *ngIf="errorMsg" class="text-red-700 bg-red-100 border border-red-400 p-3 rounded mb-4">
    {{ errorMsg }}
  </div> -->

  <!-- Form -->
  <p class="text-base font-semibold text-gray-700 mb-4">Réservation</p>


  <form [formGroup]="form"  class="grid grid-cols-1 md:grid-cols-3 gap-4">

    <!-- Nom Client -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Nom Client</label>
      <input class="w-full border rounded px-3 py-2 bg-gray-100" [value]="client.nom" disabled />
    </div>

    <!-- Prénom Client -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Prénom Client</label>
      <input class="w-full border rounded px-3 py-2 bg-gray-100" [value]="client.prenom" disabled />
    </div>

    <!-- Plafond Dotation -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Plafond Dotation</label>
      <input class="w-full border rounded px-3 py-2 bg-gray-100" [value]="plafondDotation" disabled />
    </div>

    <!-- Plafond Max -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Plafond Max Principal</label>
      <input class="w-full border rounded px-3 py-2 bg-gray-100" [value]="plafondMax" disabled />
    </div>

    <!-- Montant Consommé -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Dotation Consommée <span class="text-red-600">*</span></label>
      <input class="w-full border rounded px-3 py-2" type="text" formControlName="montantConsomme" />
      <p *ngIf="form.get('montantConsomme')?.touched && form.get('montantConsomme')?.invalid" class="text-red-600 text-sm mt-1">
        <span *ngIf="form.get('montantConsomme')?.errors?.['required']">Ce champ est requis.</span>
        <span *ngIf="form.get('montantConsomme')?.errors?.['min']">Valeur minimale : 0.</span>
        <span *ngIf="form.get('montantConsomme')?.errors?.['pattern']">Chiffres uniquement</span>
      </p>
    </div>

    <!-- Disponible OC -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Disponible OC <span class="text-red-600">*</span></label>
      <input class="w-full border rounded px-3 py-2" type="text" formControlName="disponibleOc" />
      <p *ngIf="form.get('disponibleOc')?.touched && form.get('disponibleOc')?.invalid" class="text-red-600 text-sm mt-1">
        <span *ngIf="form.get('disponibleOc')?.errors?.['required']">Ce champ est requis.</span>
        
        <span *ngIf="form.get('disponibleOc')?.errors?.['pattern']">Chiffres uniquement</span>
      </p>
    </div>

    <!-- montant demandé -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Montant Dotation Demandée <span class="text-red-600">*</span></label>
      <input class="w-full border rounded px-3 py-2" type="text" formControlName="montantDemande" />
      <p *ngIf="form.get('montantDemande')?.touched && form.get('montantDemande')?.invalid" class="text-red-600 text-sm mt-1">
        <span *ngIf="form.get('montantDemande')?.errors?.['required']">Ce champ est requis.</span>
        <span *ngIf="form.get('montantDemande')?.errors?.['min']">Valeur minimale : 1.</span>
         <span *ngIf="form.get('montantDemande')?.errors?.['pattern']">Chiffres uniquement</span>
      </p>
    </div>

    <!-- Numero -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Numéro de Réservation / Ticket OC <span class="text-red-600">*</span></label>
      <input class="w-full border rounded px-3 py-2" formControlName="numTicketOc" />
      <p *ngIf="form.get('numTicketOc')?.touched && form.get('numTicketOc')?.invalid" class="text-red-600 text-sm mt-1">
        <span *ngIf="form.get('numTicketOc')?.errors?.['required']">Ce champ est requis.</span>
        <span *ngIf="form.get('numTicketOc')?.errors?.['pattern']">Doit être alphanumérique (A-Z, a-z, 0-9).</span>
      </p>
    </div>
    <!-- Numéro de passeport -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Numéro de passeport <span class="text-red-600">*</span></label>
      <input type="text" class="w-full border rounded px-3 py-2" formControlName="numero_passport" placeholder="Ex: P123456"/>
      <p *ngIf="form.get('numero_passport')?.touched && form.get('numero_passport')?.invalid" class="text-red-600 text-sm mt-1">
        <span *ngIf="form.get('numero_passport')?.errors?.['required']">Ce champ est requis.</span>
        <span *ngIf="form.get('numero_passport')?.errors?.['pattern']">Format invalide (lettres et chiffres, min 3 caractères).</span>
      </p>
    </div>

    <!-- choix compte -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Compte à Prélever <span class="text-red-600">*</span></label>
      <select class="w-full border rounded px-3 py-2" formControlName="compte">
        <option value="">Sélectionner un compte</option>
        <option *ngFor="let c of comptes" [value]="c.idCompte">
          {{ c.numeroCompte }}
        </option>
      </select>
      <p *ngIf="form.get('compte')?.touched && form.get('compte')?.invalid" class="text-red-600 text-sm mt-1">
        Veuillez sélectionner un compte.
      </p>
    </div>
    <!-- pass-->
     <div class="col-span-full">
<label class="block text-sm font-medium text-gray-700 mb-1">
  Upload Passport <span class="text-red-600">*</span>
</label>


<div class="mt-1">
  <label
    for="passportUpload"
    class="flex items-center justify-center w-10 h-10 bg-teal-600 hover:bg-teal-700 text-white cursor-pointer"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
      viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M16 12l-4-4m0 0l-4 4m4-4v12" />
    </svg>
  </label>

  <input
    type="file"
    id="passportUpload"
    (change)="onFileSelected($event)"
    class="hidden"
  />
   <span *ngIf="selectedFileName" class="text-sm text-gray-700">{{ selectedFileName }}</span>
</div>
</div>


  </form>
</div>
